<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Src/stm32l4xx_hal_dcmi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_413f4e031a85da0d68269c6fd2f76e1c.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">stm32l4xx_hal_dcmi.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>DCMI HAL module driver This file provides firmware functions to manage the following functionalities of the Digital Camera Interface (DCMI) peripheral:  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="stm32l4xx__hal_8h_source.html">stm32l4xx_hal.h</a>&quot;</code><br />
</div><a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DCMI HAL module driver This file provides firmware functions to manage the following functionalities of the Digital Camera Interface (DCMI) peripheral: </p>
<dl class="section author"><dt>Author</dt><dd>MCD Application Team<ul>
<li>Initialization and de-initialization functions</li>
<li>IO operation functions</li>
<li>Peripheral Control functions</li>
<li>Peripheral State and Error functions</li>
</ul>
</dd></dl>
<pre class="fragment">==============================================================================
                      ##### How to use this driver #####
==============================================================================
[..]
    The sequence below describes how to use this driver to capture images
    from a camera module connected to the DCMI Interface.
    This sequence does not take into account the configuration of the
    camera module, which should be made before configuring and enabling
    the DCMI to capture images.

  (#) Program the required configuration through the following parameters:
      horizontal and vertical polarity, pixel clock polarity, capture rate,
      synchronization mode, frame delimiter codes, data width, byte and line
      selection using HAL_DCMI_Init() function.

  (#) Optionally select JPEG mode; in that case, only the polarity
      and the capture mode parameters need to be set.

  (#) Capture mode can be either snapshot or continuous mode.

  (#) Configure the DMA_Handle to transfer data from DCMI DR
      register to the destination memory buffer.

  -@- In snapshot mode, the interface transfers a single frame through DMA. In
     continuous mode, the DMA must be set in circular mode to ensure a continuous
     flow of images data samples.

  (#) Program the transfer configuration through the following parameters:
      DCMI mode, destination memory buffer address and data length then
      enable capture using HAL_DCMI_Start_DMA() function.

  (#) Whether in continuous or snapshot mode, data length parameter must be
      equal to the frame size.

  (#) When the frame size is unknown beforehand (e.g. JPEG case), data length must
      be large enough to ensure the capture of a frame.

  (#) If the frame size is larger than the maximum DMA transfer length (i.e. 65535),
      (++) the DMA must be configured in circular mode, either for snapshot or continuous
           capture mode,
      (++) during capture, the driver copies the image data samples from DCMI DR register
           at the end of the final destination buffer used as a work buffer,
      (++) at each DMA half (respectively complete) transfer interrupt, the first
           (resp. second) half of the work buffer is copied to the final destination thru
           a second DMA channel.
      (++) Parameters of this second DMA channel are contained in the memory to memory DMA
           handle "DMAM2M_Handle", itself field of the DCMI handle structure.
      (++) This memory to memory transfer has length half that of the work buffer and is
           carried out in normal mode (not in circular mode).

  (#) Optionally, configure and enable the CROP feature to select a
      rectangular window from the received image using HAL_DCMI_ConfigCrop()
      and HAL_DCMI_EnableCrop() functions. Use HAL_DCMI_DisableCrop() to
      disable this feature.

  (#) The capture can be stopped with HAL_DCMI_Stop() function.

  (#) To control the DCMI state, use the function HAL_DCMI_GetState().

  (#) To read the DCMI error code, use the function HAL_DCMI_GetError().

  [..]
  (@) When the frame size is less than the maximum DMA transfer length (i.e. 65535)
      and when in snapshot mode, user must make sure the FRAME interrupt is disabled.
      This allows to avoid corner cases where the FRAME interrupt might be triggered
      before the DMA transfer completion interrupt. In this specific configuration,
      the driver checks the FRAME capture flag after the DMA transfer end and calls
      HAL_DCMI_FrameEventCallback() if the flag is set.

   *** DCMI HAL driver macros list ***
   =============================================
   [..]
     Below the list of most used macros in DCMI HAL driver.

    (+) __HAL_DCMI_ENABLE: Enable the DCMI peripheral.
    (+) __HAL_DCMI_DISABLE: Disable the DCMI peripheral.
    (+) __HAL_DCMI_GET_FLAG: Get the DCMI pending flags.
    (+) __HAL_DCMI_CLEAR_FLAG: Clear the DCMI pending flags.
    (+) __HAL_DCMI_ENABLE_IT: Enable the specified DCMI interrupts.
    (+) __HAL_DCMI_DISABLE_IT: Disable the specified DCMI interrupts.
    (+) __HAL_DCMI_GET_IT_SOURCE: Check whether the specified DCMI interrupt has occurred or not.

  *** Callback registration ***
  =============================

  The compilation define USE_HAL_DCMI_REGISTER_CALLBACKS when set to 1
  allows the user to configure dynamically the driver callbacks.
  Use functions @ref HAL_DCMI_RegisterCallback() to register a user callback.

  Function @ref HAL_DCMI_RegisterCallback() allows to register following callbacks:
    (+) FrameEventCallback : DCMI Frame Event.
    (+) VsyncEventCallback : DCMI Vsync Event.
    (+) LineEventCallback  : DCMI Line Event.
    (+) ErrorCallback      : DCMI error.
    (+) MspInitCallback    : DCMI MspInit.
    (+) MspDeInitCallback  : DCMI MspDeInit.
  This function takes as parameters the HAL peripheral handle, the callback ID
  and a pointer to the user callback function.

  Use function @ref HAL_DCMI_UnRegisterCallback() to reset a callback to the default
  weak (surcharged) function.
  @ref HAL_DCMI_UnRegisterCallback() takes as parameters the HAL peripheral handle,
  and the callback ID.
  This function allows to reset following callbacks:
    (+) FrameEventCallback : DCMI Frame Event.
    (+) VsyncEventCallback : DCMI Vsync Event.
    (+) LineEventCallback  : DCMI Line Event.
    (+) ErrorCallback      : DCMI error.
    (+) MspInitCallback    : DCMI MspInit.
    (+) MspDeInitCallback  : DCMI MspDeInit.

  By default, after the @ref HAL_DCMI_Init and if the state is HAL_DCMI_STATE_RESET
  all callbacks are reset to the corresponding legacy weak (surcharged) functions:
  examples @ref FrameEventCallback(), @ref HAL_DCMI_ErrorCallback().
  Exception done for MspInit and MspDeInit callbacks that are respectively
  reset to the legacy weak (surcharged) functions in the @ref HAL_DCMI_Init
  and @ref  HAL_DCMI_DeInit only when these callbacks are null (not registered beforehand).
  If not, MspInit or MspDeInit are not null, the @ref HAL_DCMI_Init and @ref HAL_DCMI_DeInit
  keep and use the user MspInit/MspDeInit callbacks (registered beforehand).

  Callbacks can be registered/unregistered in READY state only.
  Exception done for MspInit/MspDeInit callbacks that can be registered/unregistered
  in READY or RESET state, thus registered (user) MspInit/DeInit callbacks can be used
  during the Init/DeInit.
  In that case first register the MspInit/MspDeInit user callbacks
  using @ref HAL_DCMI_RegisterCallback before calling @ref HAL_DCMI_DeInit
  or @ref HAL_DCMI_Init function.

  When the compilation define USE_HAL_DCMI_REGISTER_CALLBACKS is set to 0 or
  not defined, the callback registering feature is not available
  and weak (surcharged) callbacks are used.</pre><dl class="section attention"><dt>Attention</dt><dd></dd></dl>
<h2><center>&copy; Copyright (c) 2017 STMicroelectronics. All rights reserved.</center></h2>
<p>This software component is licensed by ST under BSD 3-Clause license, the "License"; You may not use this file except in compliance with the License. You may obtain a copy of the License at: opensource.org/licenses/BSD-3-Clause </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
